<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">
   
<h:head>
    <title>Welcome</title>
</h:head>
<h:body>
    <h:form id="selectLanguage">
        <p:panelGrid columns="2">
            <h:outputText value="Lang" />
            <p:selectOneMenu value="#{languageSwitcherBean.selectedLanguage}" onchange="document.getElementById('selectLanguage').submit();" >
                <f:selectItems value="#{languageSwitcherBean.languages}" ></f:selectItems>
            </p:selectOneMenu> 
        </p:panelGrid>
    </h:form>

    <h:form id="editForm">
        <table>
            <tr>
                <td><h:outputLabel for="firstName" value="#{message.i18n('anagraphic.firstName.label')}"/></td>
                <td>
                    <p:inputText id="firstName" value="#{anagraphicMB.anagraphic.firstName}" autocomplete="off">
                        <p:ajax event="blur" update="firstNameMsg"/>
                    </p:inputText>
                    <p:message id="firstNameMsg" for="firstName" display="icon"/>
                </td>
            </tr>
            <tr>
                <td>
                    <h:outputLabel for="surname" value="#{message.i18n('anagraphic.surname.label')}"/>
                </td>
                <td>
                    <p:inputText id="surname" value="#{anagraphicMB.anagraphic.surname}" autocomplete="off">
                    <p:ajax event="blur" update="surnameMsg"/>
                    </p:inputText>
                    <p:message id="surnameMsg" for="surname" display="icon"/>
                </td>
            </tr>
            <tr>
                <td><p:commandButton id="add" value="#{message.i18n('default.add.button')}" action="#{anagraphicMB.add}" ajax="false"/></td>
                <td><p:commandButton id="reset" value="#{message.i18n('default.reset.button')}" action="#{anagraphicMB.reset}" ajax="false"/></td>
            </tr>
        </table>
    </h:form>

    
    <h:form id="listForm">
        <p:growl id="messages" showDetail="true"/>

        <p:dataTable id="anagraphics" var="anagraphic" value="#{anagraphicMB.anagraphics}"  editable="true">  
            <p:column headerText="ID" width="20%">
                <h:outputText value="#{anagraphic.id}"/>
            </p:column>
            <p:column>
                <f:facet name="header">
                    <h:outputText value="${message.i18n('anagraphic.firstName.label')}"/>
                </f:facet>
                <p:cellEditor>
                    <f:facet name="output">
                        <h:outputText value="#{anagraphic.firstName}"/>
                    </f:facet>
                    <f:facet name="input">
                        <p:inputText value="#{anagraphic.firstName}" label="firstName"/>
                    </f:facet>             
                </p:cellEditor>
            </p:column>
            <p:column>
                <f:facet name="header">
                    <h:outputText value="${message.i18n('anagraphic.surname.label')}"/>
                </f:facet>
                <p:cellEditor>
                    <f:facet name="output">
                        <h:outputText value="#{anagraphic.surname}"/>
                    </f:facet>
                    <f:facet name="input">
                        <p:inputText value="#{anagraphic.surname}" label="surname"/>
                    </f:facet>             
                </p:cellEditor>             
            </p:column>
            <p:column headerText="#{message.i18n('default.delete.button')}" width="10%">
                <p:commandButton id="delete" icon="ui-icon-cancel" action="#{anagraphicMB.delete(anagraphic.id)}" ajax="false"/>
            </p:column>
        </p:dataTable>
        <br/>
    </h:form>
</h:body>
</html>